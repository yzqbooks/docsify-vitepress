<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç¦»çº¿æ¨¡å¼ | docsify</title>
    <meta name="description" content="Just playing around.">
    <link rel="stylesheet" href="/docsify-vitepress/assets/style.c3210e46.css">
    <link rel="modulepreload" href="/docsify-vitepress/assets/app.131805b1.js">
    <link rel="modulepreload" href="/docsify-vitepress/assets/pwa.md.29dad110.lean.js">
    
    <meta name="twitter:title" content="ç¦»çº¿æ¨¡å¼ | docsify">
  <meta property="og:title" content="ç¦»çº¿æ¨¡å¼ | docsify">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/docsify-vitepress/" aria-label="docsify, back to home" data-v-675d8756 data-v-cc01ef16><!----> docsify</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/docsify-vitepress/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/docsify-vitepress/configuration" data-v-b8818f8c>Config Reference <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/vuejs/vitepress/releases" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Release Notes <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/docsify-vitepress/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/docsify-vitepress/configuration" data-v-b8818f8c>Config Reference <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/vuejs/vitepress/releases" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Release Notes <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">åŸºç¡€</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/">é¦–é¡µ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/quickstart">å¿«é€Ÿå¼€å§‹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/more-pages">å¤šé¡µæ–‡æ¡£</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/custom-navbar">å®šåˆ¶å¯¼èˆª</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/cover">å°é¢</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">é…ç½®</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/configuration">é…ç½®é¡¹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/themes">ä¸»é¢˜</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/plugins">ä½¿ç”¨æ’ä»¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docsify-vitepress/markdown">markdowné…ç½®</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="ç¦»çº¿æ¨¡å¼" tabindex="-1">ç¦»çº¿æ¨¡å¼ <a class="header-anchor" href="#ç¦»çº¿æ¨¡å¼" aria-hidden="true">#</a></h1><p><a href="https://developers.google.com/web/progressive-web-apps/" target="_blank" rel="noopener noreferrer">Progressive Web Apps</a>(PWA) æ˜¯ä¸€é¡¹èåˆ Web å’Œ Native åº”ç”¨å„é¡¹ä¼˜ç‚¹çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å…¶æ”¯æŒç¦»çº¿åŠŸèƒ½çš„ç‰¹ç‚¹ï¼Œè®©æˆ‘ä»¬çš„ç½‘ç«™å¯ä»¥åœ¨ä¿¡å·å·®æˆ–è€…ç¦»çº¿çŠ¶æ€ä¸‹æ­£å¸¸è¿è¡Œã€‚ è¦ä½¿ç”¨å®ƒä¹Ÿéå¸¸å®¹æ˜“ã€‚</p><h2 id="åˆ›å»º-serviceworker" tabindex="-1">åˆ›å»º serviceWorker <a class="header-anchor" href="#åˆ›å»º-serviceworker" aria-hidden="true">#</a></h2><p>è¿™é‡Œå·²ç»æ•´ç†å¥½äº†ä¸€ä»½ä»£ç ï¼Œä½ åªéœ€è¦åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>sw.js</code> æ–‡ä»¶ï¼Œå¹¶ç²˜è´´ä¸‹é¢çš„ä»£ç ã€‚</p><p><em>sw.js</em></p><div class="language-js"><pre><code><span class="token comment">/* ===========================================================
 * docsify sw.js
 * ===========================================================
 * Copyright 2016 @huxpro
 * Licensed under Apache 2.0
 * Register service worker.
 * ========================================================== */</span>

<span class="token keyword">const</span> <span class="token constant">RUNTIME</span> <span class="token operator">=</span> <span class="token string">&#39;docsify&#39;</span>
<span class="token keyword">const</span> <span class="token constant">HOSTNAME_WHITELIST</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  self<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hostname<span class="token punctuation">,</span>
  <span class="token string">&#39;fonts.gstatic.com&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;fonts.googleapis.com&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;unpkg.com&#39;</span>
<span class="token punctuation">]</span>

<span class="token comment">// The Util Function to hack URLs of intercepted requests</span>
<span class="token keyword">const</span> <span class="token function-variable function">getFixedUrl</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span>

  <span class="token comment">// 1. fixed http URL</span>
  <span class="token comment">// Just keep syncing with location.protocol</span>
  <span class="token comment">// fetch(httpURL) belongs to active mixed content.</span>
  <span class="token comment">// And fetch(httpRequest) is not supported yet.</span>
  url<span class="token punctuation">.</span>protocol <span class="token operator">=</span> self<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol

  <span class="token comment">// 2. add query for caching-busting.</span>
  <span class="token comment">// Github Pages served with Cache-Control: max-age=600</span>
  <span class="token comment">// max-age on mutable content is error-prone, with SW life of bugs can even extend.</span>
  <span class="token comment">// Until cache mode of Fetch API landed, we have to workaround cache-busting with query string.</span>
  <span class="token comment">// Cache-Control-Bug: https://bugs.chromium.org/p/chromium/issues/detail?id=453190</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span>hostname <span class="token operator">===</span> self<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hostname<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    url<span class="token punctuation">.</span>search <span class="token operator">+=</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span>search <span class="token operator">?</span> <span class="token string">&#39;&amp;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;?&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;cache-bust=&#39;</span> <span class="token operator">+</span> now
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> url<span class="token punctuation">.</span>href
<span class="token punctuation">}</span>

<span class="token comment">/**
 *  @Lifecycle Activate
 *  New one activated when old isnt being used.
 *
 *  waitUntil(): activating ====&gt; activated
 */</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;activate&#39;</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>clients<span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/**
 *  @Functional Fetch
 *  All network requests are being intercepted here.
 *
 *  void respondWith(Promise&lt;Response&gt; r)
 */</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;fetch&#39;</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Skip some of cross-origin requests, like those for Google Analytics.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">HOSTNAME_WHITELIST</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>hostname<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Stale-while-revalidate</span>
    <span class="token comment">// similar to HTTP&#39;s stale-while-revalidate: https://www.mnot.net/blog/2007/12/12/stale</span>
    <span class="token comment">// Upgrade from Jake&#39;s to Surma&#39;s: https://gist.github.com/surma/eb441223daaedf880801ad80006389f1</span>
    <span class="token keyword">const</span> cached <span class="token operator">=</span> caches<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">)</span>
    <span class="token keyword">const</span> fixedUrl <span class="token operator">=</span> <span class="token function">getFixedUrl</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">)</span>
    <span class="token keyword">const</span> fetched <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span>fixedUrl<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token string">&#39;no-store&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> fetchedCopy <span class="token operator">=</span> fetched<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resp</span> <span class="token operator">=&gt;</span> resp<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// Call respondWith() with whatever we get first.</span>
    <span class="token comment">// If the fetch fails (e.g disconnected), wait for the cache.</span>
    <span class="token comment">// If thereâ€™s nothing in cache, wait for the fetch.</span>
    <span class="token comment">// If neither yields a response, return offline pages.</span>
    event<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span>
      Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fetched<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> cached<span class="token punctuation">)</span><span class="token punctuation">,</span> cached<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resp</span> <span class="token operator">=&gt;</span> resp <span class="token operator">||</span> fetched<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* eat any errors */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// Update the cache with the version we fetched (only for ok status)</span>
    event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
      Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fetchedCopy<span class="token punctuation">,</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>response<span class="token punctuation">,</span> cache<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span>ok <span class="token operator">&amp;&amp;</span> cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* eat any errors */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="æ³¨å†Œ" tabindex="-1">æ³¨å†Œ <a class="header-anchor" href="#æ³¨å†Œ" aria-hidden="true">#</a></h2><p>ç°åœ¨ï¼Œåˆ° <code>index.html</code> é‡Œæ³¨å†Œå®ƒã€‚è¿™ä¸ªåŠŸèƒ½åªèƒ½å·¥ä½œåœ¨ä¸€äº›ç°ä»£æµè§ˆå™¨ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŠ ä¸ªåˆ¤æ–­ã€‚</p><p><em>index.html</em></p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> navigator<span class="token punctuation">.</span>serviceWorker <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&#39;sw.js&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ä½“éªŒä¸€ä¸‹" tabindex="-1">ä½“éªŒä¸€ä¸‹ <a class="header-anchor" href="#ä½“éªŒä¸€ä¸‹" aria-hidden="true">#</a></h2><p>å‘å¸ƒä½ çš„ç½‘ç«™ï¼Œå¹¶å¼€å§‹äº«å—ç¦»çº¿æ¨¡å¼çš„é­”åŠ›å§ï¼ğŸ‘» å½“ç„¶ä½ ç°åœ¨çœ‹åˆ°çš„ docsify çš„æ–‡æ¡£ç½‘ç«™å·²ç»æ”¯æŒç¦»çº¿æ¨¡å¼äº†ï¼Œä½ å¯ä»¥å…³æ‰ Wi-Fi ä½“éªŒä¸€ä¸‹ã€‚</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"4d8d088c\",\"summary.md\":\"9912e3e6\",\"_coverpage.md\":\"c6ff1637\",\"_media_example.md\":\"28aede6c\",\"awesome.md\":\"9a0e1e93\",\"cdn.md\":\"f66f450c\",\"configuration.md\":\"f7d64dc6\",\"cover.md\":\"217e636a\",\"custom-navbar.md\":\"ac75bdf5\",\"deploy.md\":\"a730ab1b\",\"embed-files.md\":\"d6440aac\",\"helpers.md\":\"ab9db3c0\",\"index.md\":\"32141ae0\",\"language-highlight.md\":\"6b444cd7\",\"markdown.md\":\"5bd6490c\",\"more-pages.md\":\"b23d01a7\",\"my404.md\":\"c6efd2b1\",\"plugins.md\":\"27f2b72e\",\"pwa.md\":\"29dad110\",\"quickstart.md\":\"a6e79e38\",\"ssr.md\":\"e479afdd\",\"themes.md\":\"d097e932\",\"vue.md\":\"b8a02e4a\",\"write-a-plugin.md\":\"7ef73afb\"}")</script>
    <script type="module" async src="/docsify-vitepress/assets/app.131805b1.js"></script>
    
  </body>
</html>